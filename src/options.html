<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="css/bootstrap-dark.css">
    <link rel="stylesheet" href="css/custom.css">
</head>

<body style="min-height: 500px;">
    <div class="container-fluid my-3">
        <div class="row">
            <div class="col">
                <h3>
                    Firefox Containers Helper Preferences
                </h3>
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <h4>
                    A warning about Firefox Sync
                </h4>
                <p>
                    Firefox Sync is a great utility, but there is a limit on the amount of data that this extension can
                    store when using Firefox Sync. <b>It is recommended to not use Firefox Sync if you store more than
                        100 containers.</b> Otherwise, the extension may silently fail or have other erroneous behavior,
                    once it hits the storage limit. You can export and import containers below.
                </p>
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <h4>
                    Protocol Confirmation
                </h4>
                <p>
                    When attempting to open a default container URL without a recognized protocol, Firefox may
                    not load the page correctly. To improve user experience, a confirmation dialog asks if you'd like to
                    save if neither <code>http://</code> nor <code>https://</code> are detected at the beginning of a
                    URL. However, there may be scenarios where a protocol <i>other</i> than those two are
                    desired, such as the <code>dat://</code> protocol (which can be enabled via extensions), or other
                    protocols. Since it's not really feasible to identify all protocols that are supported by your
                    current Firefox setup, the below settings can help you hide the confirmation dialogs permanently.
                </p>
                <div class="form-check mt-2">
                    <input class="form-check-input" type="checkbox" id="neverConfirmForOpeningNonHttpUrls"
                        checked="false">
                    <label class="form-check-label" for="neverConfirmForOpeningNonHttpUrls">I want to <b>open</b>
                        default URLs that do not start with <code>http://</code> or <code>https://</code>. Don't prompt
                        me every time.
                    </label>
                </div>
                <div class="form-check mt-1">
                    <input class="form-check-input" type="checkbox" id="neverConfirmForSavingNonHttpUrls"
                        checked="false">
                    <label class="form-check-label" for="neverConfirmForSavingNonHttpUrls">I want to <b>save</b>
                        default URLs that do not start with <code>http://</code> or <code>https://</code>. Don't prompt
                        me every time.
                    </label>
                </div>
            </div>
        </div>
        <div class="row mt-3">
            <div class="col-12">
                <h4>
                    Opening the current tab URL for containers on the same domain/port/origin
                </h4>
                <p>
                    This is useful for viewing the same page quickly across different containers. If you are currently
                    on <code>https://example.com/test1234</code> and you have a container has a default URL that matches
                    the current tab's domain, such as <code>https://example.com/abcdef</code>, you can choose to simply
                    use the current tab's URL of <code>https://example.com/test1234</code> when opening that container
                    tab instead of its default URL (<code>https://example.com/abcdef</code>).
                </p>
                <p>
                    If you want to match more than just the domain, you can choose to match any of the following -
                    consider the example
                    <code>https://example.com:12345/test/index.html</code>:
                </p>
                <ul>
                    <li><code>hostname</code> - (recommended) - matches <code>example.com</code> only</li>
                    <li><code>domain</code> matches <code>example.com</code> and all subdomains</li>
                    <li><code>domain-port</code> matches <code>example.com</code> and all subdomains, and the
                        port</li>
                    <li><code>host</code> matches <code>example.com:12345</code> only (hostname and port)</li>
                    <li><code>origin</code> matches <code>https://example.com:12345</code> only</li>
                </ul>
                <p>
                    For technical information on how the hostname/host/origin are determined, please visit the MDN page
                    for
                    the built-in JavaScript <code>URL</code> interface, here:
                    <a href="https://developer.mozilla.org/en-US/docs/Web/API/URL" target="_blank"
                        rel="noopener noreferer">https://developer.mozilla.org/en-US/docs/Web/API/URL</a>
                </p>
                <p>
                    <b>Warning:</b> The <code>domain</code> option may not be robust enough to properly check all
                    possible URLs that can exist. It works by splitting up the <code>hostname</code> value by
                    <code>.</code> characters, and checking just the final two values. Similarly, the
                    <code>domain-port</code> option performs the same check, but also checks that the <code>port</code>
                    is equal. Where possible, you should use the <code>hostname</code>, <code>host</code>,
                    <code>origin</code> values, as they are native to JavaScript.
                </p>
                <div class="mt-2">
                    <select id="openCurrentTabUrlOnMatchSelect" class="form-select"
                        aria-label="Match hostname/host/origin">
                        <option selected value="">Disabled (default)</option>
                        <option value="hostname">Hostname/subdomain exact match (example.com but not www.example.com)
                        </option>
                        <option value="domain">Domain (*example.com, and example.com)</option>
                        <option value="domain-port">Domain and port (*example.com:12345,
                            and example.com:12345)
                        </option>
                        <option value="host">Host, exact match (example.com:12345)</option>
                        <option value="origin">Origin, exact match (https://example.com:12345)</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="row mt-3">
            <div class="col">
                <h4>
                    Keyboard Shortcuts
                </h4>
                <p>
                    You can set the keyboard shortcut that will cause the addon window to appear here. You will have to
                    type out the keyboard shortcut yourself - use key combinations such as <code>Alt+Shift+D</code>,
                    <code>Alt+Shift+W</code>, etc.
                </p>
                <p>
                    Warning: Many keyboard shortcuts may not work, you will have to
                    experiment until you find one that works. Please <a target="_blank"
                        href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/commands#key_combinations"
                        rel="noopener noreferer">visit the official documentation to see what options are available</a>.
                </p>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <span class="input-group-text">Shortcut: Show Window</span>
                    </div>
                    <input type="text" class="form-control" aria-label="Keyboard Shortcut" aria-describedby="update"
                        id="shortcut">
                    <div class="input-group-append">
                        <button class="btn btn-primary" type="button" id="update">Set</button>
                        <button class="btn btn-warning" type="button" id="reset">Reset</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="row mt-3">
            <div class="col">
                <h4>
                    Import Containers
                </h4>
                <p>
                    You can import your existing containers from a JSON string here. Click <i>Import
                        Containers</i>
                    to get a list. Note that importing containers will simply
                    add new containers. If you wish to set your Firefox containers to only the ones being imported, you
                    can use
                    the bulk deletion functionality offered in the normal extension popup window to delete containers
                    first, and then you can import here. Each container should have the following string properties:
                <ul>
                    <li><code>color</code> <i>(defaults to <code>toolbar</code> color)</i></li>
                    <li><code>icon</code> <i>(defaults to <code>circle</code> icon)</i></li>
                    <li><code>name</code> <i>(required)</i></li>
                    <li><code>defaultUrl</code> <i>(optional)</i></li>
                </ul>
                </p>
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <div class="form-group">
                    <label for="containersImportAsJSON">Containers JSON</label>
                    <textarea class="form-control" id="containersImportAsJSON"
                        style="font-family: 'Courier New', Courier, monospace" rows="6"></textarea>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <button type="button" id="btnImportContainersJSON" class="btn btn-block btn-primary">Import
                    Containers from JSON</button>
            </div>
        </div>
        <div class="row mt-3">
            <div class="col">
                <h4>
                    Export Containers
                </h4>
                <p>
                    You can export your existing containers as a JSON or CSV string here. Click <i>Refresh</i>
                    re-query the browser's container configuration and update the below text fields with an exported
                    containers list.
                </p>
            </div>
        </div>
        <div class="row">
            <div class="col-6">
                <div class="form-group">
                    <label for="containersExportAsJSON">Containers JSON</label>
                    <textarea class="form-control" readonly="true" id="containersExportAsJSON"
                        style="font-family: 'Courier New', Courier, monospace" rows="6"></textarea>
                </div>
            </div>
            <div class="col-6">
                <div class="form-group">
                    <label for="containersExportAsCSV">Containers CSV</label>
                    <textarea class="form-control" readonly="true" id="containersExportAsCSV"
                        style="font-family: 'Courier New', Courier, monospace" rows="6"></textarea>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <button type="button" id="btnExportContainers" class="btn btn-block btn-primary">Refresh</button>
            </div>
        </div>
        <div class="row mt-3">
            <div class="col">
                <h4>
                    Local and Synchronized Settings
                </h4>
                <p>
                    The local and Firefox Sync configuration settings can be reviewed here. You can modify the raw JSON
                    settings of this addon, click <i>Save Locally</i>, and then you can push the changes to Firefox Sync
                    by clicking <i>Save to Sync</i>. To pull settings down from Firefox Sync, you can click <i>Save to
                        Local from Sync</i>.
                </p>
                <p>
                    Synchronization between devices should be something that you can finely control. That's why, by
                    default, saving settings to sync is <b>turned off</b>. You can enable all settings to save to
                    Firefox Sync by checking the <i>Always set settings to Firefox Sync</i> checkbox below, and you can
                    enable reading from Firefox Sync whenever the extension window is opened by checking the <i>Always
                        get settings from Firefox Sync</i> checkbox below.
                </p>
                <p>
                    <i>Note: Use caution when removing this extension from Firefox. Sync settings persist, but local
                        settings may get reset. For best results, copy/paste your settings elsewhere when purging
                        extensions.</i>
                </p>
            </div>
        </div>
        <div class="row">
            <div class="col-6">
                <div class="form-group">
                    <label for="localSettingsTextArea">Local Settings</label>
                    <textarea class="form-control" id="localSettingsTextArea"
                        style="font-family: 'Courier New', Courier, monospace" rows="6"></textarea>
                </div>
            </div>
            <div class="col-6">
                <div class="form-group">
                    <label for="syncSettingsTextArea">Synchronized Settings</label>
                    <textarea class="form-control" readonly="true" id="syncSettingsTextArea"
                        style="font-family: 'Courier New', Courier, monospace" rows="6"></textarea>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-6">
                <button type="button" id="btnSaveLocal" class="btn btn-block btn-primary">Save Locally</button>
                <button type="button" id="btnSaveSync" class="btn btn-block btn-primary">Save to Sync</button>
                <button type="button" id="btnResetLocal" class="btn btn-block btn-primary">Refresh</button>
            </div>
            <div class="col-6">
                <button type="button" id="btnLoadFromSync" class="btn btn-block btn-primary">Save to Local from
                    Sync</button>
                <button type="button" id="btnRefreshSync" class="btn btn-block btn-primary">Refresh</button>
            </div>
        </div>
        <div class="row">
            <div class="col-6">
                <span id="syncValidationText"></span>
            </div>
            <div class="col-6">
                <div class="form-check mt-2">
                    <input class="form-check-input" type="checkbox" id="alwaysSetSync" checked="true">
                    <label class="form-check-label" for="alwaysSetSync">Always set settings to Firefox Sync</label>
                </div>
                <div class="form-check mt-1">
                    <input class="form-check-input" type="checkbox" id="alwaysGetSync" checked="false">
                    <label class="form-check-label" for="alwaysGetSync">Always get settings from Firefox Sync</label>
                </div>
            </div>
        </div>
        <div class="row mt-3">
            <div class="col-6">
                <button type="button" id="btnResetLocalSettings" class="btn btn-block btn-danger">Reset Local
                    Settings</button>
            </div>
            <div class="col-6">
                <button type="button" id="btnResetSyncSettings" class="btn btn-block btn-danger">Reset Sync
                    Settings</button>
            </div>
        </div>
    </div>
    <script src="options.js"></script>
</body>

</html>